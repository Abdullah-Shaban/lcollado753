Scrapping Ravens data from ESPN
===============================

Instructions
https://github.com/jtleek/jhsph753/blob/master/assignments/feb5-inclass.md

```{r}
## Load lib and read data
library(XML)
html3 <- htmlTreeParse("http://espn.go.com/nfl/team/_/name/bal/baltimore-ravens", useInternalNodes=TRUE)

```

A bit on xpath syntax
http://www.w3schools.com/xpath/xpath_syntax.asp

```{r}
## Get wins and scores
win <- xpathSApply(html3, "//li[@class='game-status win'] | //li[@class='game-status loss']", xmlValue)
score <- xpathSApply(html3, "//li[@class='score']", xmlValue)
where <- xpathSApply(html3, "//li[@class='game-status']", xmlValue)
team <- xpathSApply(html3, "//li[@class='team-name']", xmlValue)
dates <- xpathSApply(html3, "//tr[contains(@class,'row team')]/td[2]",xmlValue)


## Group into a data.frame
data <- data.frame(Win = win, Score = score, Where = where, Team = team, Date = dates)
data
```


```{r}
## Another way of doing it (from Jiawei)
xpathSApply(html3, "//ul[@class='game-schedule']", xmlValue)
```


```{r}
dateDownloaded <- date()
dateDownloaded
save(data, dateDownloaded, file="raw.Rdata")
```


